<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>2026 Senedd Constituency Lookup â€“ Check Your Welsh Constituency</title>
  <meta name="description" content="Enter your postcode to find your 2026 Senedd constituency. This lookup uses official Welsh boundary data.">

  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;500;700&display=swap">

  <script src="https://unpkg.com/@turf/turf@6/turf.min.js" defer></script>

  <style>
    :root {
      --accent: #F54927;
      --accent-light: #F87C63;
      --border: #e0e0e0;
      --bg: #ffffff;
      --text: #000000;
      --card-bg: #ffffff;
    }

    body.dark {
      --bg: #1a1a1a;
      --text: #e6e6e6;
      --card-bg: #262626;
      --border: #3a3a3a;
    }

    html, body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font-family: Rubik, sans-serif;
      transition: background 0.3s, color 0.3s;
    }

    body {
      display: flex;
      justify-content: center;
      padding: 2rem 1rem;
    }

    .page-wrap {
      max-width: 760px;
      width: 100%;
    }

    .top-bar {
      width: 100%;
      display: flex;
      justify-content: flex-end;
      margin-bottom: 1rem;
    }

    .mode-toggle {
      cursor: pointer;
      background: none;
      border: none;
      font-size: 0.95rem;
      font-weight: 600;
      color: var(--accent);
    }

    .card {
      background: var(--card-bg);
      padding: 2rem;
      border-radius: 14px;
      border: 1px solid var(--border);
      box-shadow: 0 3px 12px rgba(0,0,0,0.06);
      transition: background 0.3s, border-color 0.3s;
    }

    h1 {
      margin-top: 0;
      font-size: 1.9rem;
      font-weight: 700;
      line-height: 1.3;
      color: var(--text);
    }

    p.intro {
      margin-top: 0.75rem;
      margin-bottom: 1.5rem;
      font-size: 1.05rem;
      color: var(--text);
    }

    label {
      font-weight: 600;
      margin-bottom: 0.4rem;
      display: block;
    }

    .postcode-row {
      display: flex;
      gap: 0.5rem;
    }

    input[type="text"] {
      flex: 1;
      font-size: 1rem;
      padding: 0.65rem;
      border: 1px solid var(--accent);
      border-radius: 8px;
      background: var(--card-bg);
      color: var(--text);
    }

    input[type="text"]:focus {
      outline: 2px solid var(--accent);
    }

    #location-btn {
      width: 42px;
      height: 42px;
      cursor: pointer;
      fill: var(--accent);
      stroke: var(--accent);
      stroke-width: 2;
    }

    #location-btn:hover {
      fill: var(--accent-light);
      stroke: var(--accent-light);
    }

    button[type="submit"] {
      width: 100%;
      margin-top: 1rem;
      background: var(--accent);
      color: #fff;
      padding: 0.85rem 1rem;
      border: none;
      border-radius: 8px;
      font-size: 1.05rem;
      font-weight: 700;
      cursor: pointer;
    }

    button[type="submit"]:hover {
      background: var(--accent-light);
    }

    #result {
      margin-top: 1.5rem;
      font-size: 1.2rem;
      font-weight: 600;
    }

    .const-highlight {
      color: var(--accent);
      font-weight: 700;
    }

    #constituency-info {
      margin-top: 1rem;
      font-size: 1rem;
    }

    .data-source {
      margin-top: 2rem;
      font-size: 0.85rem;
      color: var(--text);
      opacity: 0.75;
    }

    #svg-map {
      margin-top: 1.5rem;
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 0.5rem;
      background: var(--card-bg);
      transition: background 0.3s, border-color 0.3s;
    }

    #svg-map svg {
      width: 100%;
      height: auto;
    }

    /* Tooltip */
    #map-tooltip {
      position: absolute;
      display: none;
      pointer-events: none;
      padding: 8px 12px;
      background: var(--accent);
      color: #fff;
      border-radius: 6px;
      font-weight: 600;
      font-size: 0.95rem;
      transform: translate(-50%, -100%);
      z-index: 1000;
      box-shadow: 0 4px 10px rgba(0,0,0,0.25);
    }

    #map-tooltip::after {
      content: "";
      position: absolute;
      left: 50%;
      bottom: -6px;
      transform: translateX(-50%);
      border-width: 6px 6px 0 6px;
      border-style: solid;
      border-color: var(--accent) transparent transparent transparent;
    }

    .highlighted-const {
      fill: var(--accent) !important;
      stroke: var(--accent-light) !important;
      stroke-width: 3px !important;
    }

    @media (max-width: 480px) {
      h1 { font-size: 1.6rem; }
    }
  </style>
</head>

<body>

  <div class="page-wrap">

    <div class="top-bar">
      <button class="mode-toggle" id="mode-toggle">Dark mode</button>
    </div>

    <div class="card">

      <h1>Find Your 2026 Senedd Constituency</h1>
      <p class="intro">Enter your postcode to find out which 2026 Senedd constituency you live in. This tool uses official boundary data.</p>

      <form id="lookup-form">
        <label for="postcode">Postcode</label>

        <div class="postcode-row">
          <input type="text" id="postcode" placeholder="e.g. CF99 1SN" required autocomplete="postal-code" />

          <svg id="location-btn" role="button" tabindex="0" aria-label="Use my location" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="8" fill="none"/>
            <circle cx="12" cy="12" r="4"/>
          </svg>
        </div>

        <button type="submit">Look up</button>
      </form>

      <div id="result"></div>
      <div id="constituency-info"></div>
      <div id="svg-map"></div>

      <div class="data-source">
        Data from Senedd Cymru / Welsh Parliament. Your postcode is not stored.
      </div>

    </div>
  </div>

  <div id="map-tooltip"></div>

  <!-- Dark mode script -->
  <script>
    const toggleBtn = document.getElementById('mode-toggle');

    function applyMode(mode) {
      document.body.classList.toggle('dark', mode === 'dark');
      toggleBtn.textContent = mode === 'dark' ? 'Light mode' : 'Dark mode';
      localStorage.setItem('theme', mode);
    }

    applyMode(localStorage.getItem('theme') || 'light');

    toggleBtn.addEventListener('click', () => {
      const newMode = document.body.classList.contains('dark') ? 'light' : 'dark';
      applyMode(newMode);
    });
  </script>

  <!-- Postcode lookup script -->
  <script>
  (function () {
    const form = document.getElementById('lookup-form');
    const postcodeInput = document.getElementById('postcode');
    const locationBtn = document.getElementById('location-btn');
    const resultDiv = document.getElementById('result');
    const infoDiv = document.getElementById('constituency-info');

    async function lookupPostcode(postcode) {
      resultDiv.textContent = 'Looking up...';
      infoDiv.textContent = '';
      try {
        const res = await fetch(`https://api.postcodes.io/postcodes/${encodeURIComponent(postcode)}`);
        const data = await res.json();
        if (data.status !== 200) throw new Error('Postcode not found');
        const { latitude, longitude } = data.result;

        // Example: display coords and a placeholder constituency
        resultDiv.innerHTML = `Coordinates: ${latitude.toFixed(5)}, ${longitude.toFixed(5)}`;
        infoDiv.innerHTML = `Constituency: <span class="const-highlight">Example Constituency</span>`;

        // You can add Turf.js mapping code here to highlight the correct constituency on #svg-map
      } catch (err) {
        resultDiv.textContent = 'Postcode not found. Check your entry.';
        console.error(err);
      }
    }

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const postcode = postcodeInput.value.trim();
      if (!postcode) return;
      lookupPostcode(postcode);
    });

    locationBtn.addEventListener('click', () => {
      if (!navigator.geolocation) {
        alert('Geolocation is not supported in your browser');
        return;
      }
      navigator.geolocation.getCurrentPosition((pos) => {
        const { latitude, longitude } = pos.coords;
        resultDiv.innerHTML = `Coordinates: ${latitude.toFixed(5)}, ${longitude.toFixed(5)}`;
        infoDiv.innerHTML = `Constituency: <span class="const-highlight">Example Constituency</span>`;
      }, (err) => {
        alert('Unable to get location: ' + err.message);
      });
    });
  })();
  </script>

</body>
</html>
